<!DOCTYPE html>

<html>

<head>
<title>Friends of Ming Chow Jobs Listing</title>
<link rel="stylesheet" href="jobs.css" media="screen">
<script>
	function getJSON() {
		try {
			xmlhttp = new XMLHttpRequest();
			xmlhttp.open('GET', 'http://messagehub.herokuapp.com/lab8.json', false);
			xmlhttp.send();
			return JSON.parse(xmlhttp.responseText);
		}
		catch (err) {
			return null;
		}
    }
function parse() {
	jobs = getJSON();
	
	jobsTable = document.createElement('table');
	jobsTable.setAttribute('border', '0');
	jobsTable.setAttribute('id', 'jobsTable');
	
	for (var i = 0; i < jobs.length; i++) {
		var jobRow = document.createElement('tr');
		var companyCol = document.createElement('td');
		var positionCol = document.createElement('td');
		jobRow.setAttribute('class', 'jobRow');
		companyCol.setAttribute('class', 'leftCol');
		positionCol.setAttribute('class', 'rightCol');
		
		var company = document.createElement('h1');
		var location = document.createElement('p');
		var position = document.createElement('h2');
		
		company.setAttribute('class', 'company');
		location.setAttribute('class', 'location');
		position.setAttribute('class', 'position');
		
		companyCol.appendChild(company);
		companyCol.appendChild(location);
		positionCol.appendChild(position);
		
		jobRow.appendChild(companyCol);
		jobRow.appendChild(positionCol);
		jobsTable.appendChild(jobRow);
		
		var job = jobs[i];
		company.textContent = job.company;
		location.textContent = job.location;
		position.textContent = job.position;
	}
	document.getElementById('list').appendChild(jobsTable);
}
</script>
</head>

<body onload="parse();">
<div id="list"></div>
</body>

</html>
